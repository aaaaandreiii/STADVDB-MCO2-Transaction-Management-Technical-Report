<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>STADVDB MCO2 - Node {{nodeId}} ({{nodeRole}})</title>
  <link rel="stylesheet" href="/public/css/styles.css">

  <script>
    (function () {
      try {
        var stored = localStorage.getItem('theme');
        if (stored === 'light' || stored === 'dark') {
          document.documentElement.setAttribute('data-theme', stored);
        }
      } catch (e) {
        // ignore
      }
    })();
  </script>
</head>
<body>
  {{> header}}

  <main>
    {{{body}}}
  </main>

  {{> footer}}

  <script>
    (function () {
      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);

        try {
          localStorage.setItem('theme', theme);
        } catch (e) {
          // ignore if storage is blocked
        }

        var btn = document.getElementById('theme-toggle');
        if (btn) {
          // TEXT INDICATES CURRENT THEME
          btn.textContent = theme === 'dark'
            ? 'üåô Dark mode'
            : '‚òÄÔ∏è Light mode';
        }
      }

      // Expose to the button's onclick
      window.toggleTheme = function () {
        var current = document.documentElement.getAttribute('data-theme') || 'dark';
        var next = current === 'dark' ? 'light' : 'dark';
        applyTheme(next);
      };

      // Initialize on load (respect saved preference if any)
      document.addEventListener('DOMContentLoaded', function () {
        var initial = document.documentElement.getAttribute('data-theme') || 'dark';

        try {
          var stored = localStorage.getItem('theme');
          if (stored === 'light' || stored === 'dark') {
            initial = stored;
          }
        } catch (e) {}

        applyTheme(initial);
      });
    })();
  </script>
</body>
</html>
